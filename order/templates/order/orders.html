{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% block head %}
<link rel="stylesheet" href="{% static 'style.css' %}?{% now 'U' %}">
<link rel="stylesheet" href="{% static 'orders.css' %}?{% now 'U' %}">
<title>orders</title>
{% endblock head %}
{% block content %}
<!-- nav -->
<header>
    {% include 'inc/nav.html' %}
</header>
{% csrf_token %}
<div class="container">
    <div class="content">
        <div class="orders">
            {% for order in page_obj %}
            <div class="order" id="{{order.pk}}">
                <div class="user">
                    <div><span>user name :</span> {{order.user_info.name}}</div>
                    <div class="address">
                        <span>Address:</span>
                        <Address>"{{order.user_info.state}}" , "{{order.user_info.city}}" ,{{order.user_info.address}}
                        </Address>
                    </div>
                </div>
                <div class="products">
                    {% for product in order.products.all %}
                    <div class="product">
                        <a href="{{product.get_absolute_url}}">{{product.name}}</a>
                    </div>
                    {% endfor %}
                    <div class="price">
                        <span>price paid :</span> <span>{{order.price_paid | price}}</span>
                    </div>
                    <div class="code">
                        <span>tracking code :</span> <span>{{order.trackingcode}}</span>
                    </div>
                </div>
                <div class="date">
                    <span>{{order.create}}</span>
                </div>
                <div class="btns">
                    <div class="verify">
                        {% if order.status %}
                        <button class="opt alert status">Reject</button>
                        {% else %}
                        <button class="opt alert status">Confirme</button>
                        {% endif %}
                    </div>
                    <div class="send">
                        {% if order.send %}
                        <button class="opt alert post">Posted</button>
                        {% else %}
                        <button class="opt alert post">Post</button>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="pagination">
                <span class="step-links">
                    {% if page_obj.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                    {% endif %}

                    <span class="current">
                        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                    </span>

                    {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
    <div class="filters">
        <div class="title-box">Ordering:</div>
        <div class="filter">
            <a href="" class="secondary alert">earliest</a>
            <a href="" class="secondary alert">oldest</a>
            <a href="" class="secondary alert">posted</a>
            <a href="" class="secondary alert">not posted</a>
            <a href="" class="secondary alert">confirmed</a>
            <a href="" class="secondary alert">unconfirmed</a>
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}
<script src="{% static 'js/orders.js' %}"></script>
{% endblock js %}